
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A choose-your-own-adventure workshop for Operations and Development teams on ARO.">
      
      
        <meta name="author" content="Red Hat">
      
      
        <link rel="canonical" href="https://ws.mobb.cloud/200-ops/day2/scaling-nodes/">
      
      <link rel="icon" href="../../../favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.9">
    
    
      
        <title>Managing Worker Nodes - ARO Workshop</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.08040f6c.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Overpass:300,300i,400,400i,700,700i%7COverpass+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Overpass";--md-code-font:"Overpass Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="red">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
<header class="md-header" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="Header">
      <a href="." title="ARO Workshop" class="md-header__button md-logo" aria-label="ARO Workshop" data-md-component="logo">        
        <img src="/favicon.ico" alt="logo">  
      </a>
      <label class="md-header__button md-icon" for="__drawer">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
      </label>
      <div class="md-header__title" data-md-component="header-title">
        
        <div class="md-header__ellipsis">
            
          <div class="md-header__topic">
            <span class="md-ellipsis">
              ARO Workshop
            </span>
            <!--span>
                <img src="/rsz_logo-bancolombia.png" alt="logo">  
            </span-->
            
          </div>
          <div class="md-header__topic" data-md-component="header-topic">
            
            <span class="md-ellipsis">

                Welcome
                
            </span>
          </div>
          
        </div>
        
      </div>
      
        <div class="md-header__source">
          <a href="https://github.com/rh-mobb/aro-workshop-content" title="Go to repository" class="md-source" data-md-component="source">
    <div class="md-source__icon md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
    </div>
    <div class="md-source__repository">
      rh-mobb/aro-workshop-content
    </div>
  </a>
        </div>
      
    </nav>
    
  </header>

    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ARO Workshop" class="md-nav__button md-logo" aria-label="ARO Workshop" data-md-component="logo">
      
  <img src="../../../favicon.ico" alt="logo">

    </a>
    ARO Workshop
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/rh-mobb/aro-workshop-content" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    rh-mobb/aro-workshop-content
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../100-setup/1-environment/" class="md-nav__link">
        Environment Setup
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../100-setup/3-access-cluster/" class="md-nav__link">
        Access Your Cluster
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Day Two ARO Operations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Day Two ARO Operations" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Day Two ARO Operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Managing Worker Nodes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Managing Worker Nodes
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scaling-worker-nodes" class="md-nav__link">
    Scaling worker nodes
  </a>
  
    <nav class="md-nav" aria-label="Scaling worker nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#via-the-cli" class="md-nav__link">
    Via the CLI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#via-the-console" class="md-nav__link">
    Via the Console
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../labels/" class="md-nav__link">
        Labeling Nodes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scaling-worker-nodes" class="md-nav__link">
    Scaling worker nodes
  </a>
  
    <nav class="md-nav" aria-label="Scaling worker nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#via-the-cli" class="md-nav__link">
    Via the CLI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#via-the-console" class="md-nav__link">
    Via the Console
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/rh-mobb/aro-workshop-content/edit/master/docs/200-ops/day2/scaling-nodes.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  <h1>Managing Worker Nodes</h1>

<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">#</a></h2>
<p>When deploying your Azure Red Hat OpenShift (ARO) cluster, you can configure many aspects of your worker nodes, but what happens when you need to change your worker nodes after they've already been created? These activities include scaling the number of nodes, changing the instance type, adding labels or taints, just to name a few.</p>
<p>Many of these changes are done using MachineSets. MachineSets ensure that a specified number of Machine replicas are running at any given time. Think of a MachineSet as a "template" for the kinds of Machines that make up the worker nodes of your cluster. These are similar to other Kubernetes resources, like a ReplicaSet is to Pods. One important caveat, is that MachineSets allow users to manage many Machines as a single entity, but are contained to a specific availability zone. If you'd like to learn more, see the <a href="https://docs.openshift.com/container-platform/latest/machine_management/index.html" target="_blank">Red Hat documentation on machine management</a>.</p>
<h2 id="scaling-worker-nodes">Scaling worker nodes<a class="headerlink" href="#scaling-worker-nodes" title="Permanent link">#</a></h2>
<h3 id="via-the-cli">Via the CLI<a class="headerlink" href="#via-the-cli" title="Permanent link">#</a></h3>
<ol>
<li>
<p>First, let's see what MachineSets already exist in our cluster. To do so, run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>oc -n openshift-machine-api get machineset
</code></pre></div>
<p>By default, ARO clusters have three MachineSets, one for each availability zone. The output will look something like this:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>NAME                                         DESIRED   CURRENT   READY   AVAILABLE   AGE
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>arofundamentals-pcq8d-worker-eastus1         1         1         1       1           80m
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>arofundamentals-pcq8d-worker-eastus2         1         1         1       1           80m
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>arofundamentals-pcq8d-worker-eastus3         1         1         1       1           80m
</code></pre></div>
</li>
<li>
<p>Now, let's take a look at the machines that have been created according to the instructions provided by the above MachineSets. To do so, run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>oc -n openshift-machine-api get machine
</code></pre></div>
<p>For this workshop, we've deployed your ARO cluster with six total machines (three workers machines and three control plane machines), one in each availability zone. The output will look something like this:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>NAME                                       PHASE     TYPE              REGION   ZONE   AGE
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>arofundamentals-pcq8d-master-0                     Running   Standard_D8s_v3   eastus   1      108m
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>arofundamentals-pcq8d-master-1                     Running   Standard_D8s_v3   eastus   2      108m
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>arofundamentals-pcq8d-master-2                     Running   Standard_D8s_v3   eastus   3      108m
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>arofundamentals-pcq8d-worker-eastus1-9hjvw         Running   Standard_D4s_v3   eastus   1      103m
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>arofundamentals-pcq8d-worker-eastus2-n8mmf         Running   Standard_D4s_v3   eastus   2      103m
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>arofundamentals-pcq8d-worker-eastus3-679pk         Running   Standard_D4s_v3   eastus   3      103m
</code></pre></div>
</li>
<li>
<p>Now that we know that we have three worker nodes, let's pick a MachineSet to and create a new MachineSet using the OpenShift CLI tools, with your user number. To do so, run the following command:</p>
<p>Change the # of your user in the name of the machine set and the label user</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nv">NAME_MACHINESET</span><span class="o">=</span>arofundamentals-pcq8d-worker-eastus1-user#
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nv">LABEL_USER</span><span class="o">=</span>user#
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nb">echo</span> <span class="si">${</span><span class="nv">NAME_MACHINESET</span><span class="si">}</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nb">echo</span> <span class="si">${</span><span class="nv">LABEL_USER</span><span class="si">}</span>
</code></pre></div>
<p>The output of the command should look something like this:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>arofundamentals-pcq8d-worker-eastus1-user#
</code></pre></div>
<p>Create the following MachineSet file</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>cat <span class="s">&lt;&lt;EOF &gt;&gt;${NAME_MACHINESET}.yaml</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="s">apiVersion: machine.openshift.io/v1beta1</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="s">kind: MachineSet</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="s">metadata:</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="s">  annotations:</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="s">    machine.openshift.io/GPU: &#39;0&#39;</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="s">    machine.openshift.io/memoryMb: &#39;16384&#39;</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="s">    machine.openshift.io/vCPU: &#39;4&#39;</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="s">  name: ${NAME_MACHINESET}</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="s">  namespace: openshift-machine-api</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="s">  labels:</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="s">    machine.openshift.io/cluster-api-cluster: arofundamentals-pcq8d</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="s">    machine.openshift.io/cluster-api-machine-role: worker</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="s">    machine.openshift.io/cluster-api-machine-type: worker</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="s">spec:</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="s">  replicas: 1</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="s">  selector:</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="s">    matchLabels:</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="s">      machine.openshift.io/cluster-api-cluster: arofundamentals-pcq8d</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="s">      machine.openshift.io/cluster-api-machineset: arofundamentals-pcq8d-worker-eastus1-${LABEL_USER}</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="s">  template:</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="s">    metadata:</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="s">      labels:</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="s">        machine.openshift.io/cluster-api-cluster: arofundamentals-pcq8d</span>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="s">        machine.openshift.io/cluster-api-machine-role: worker</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="s">        machine.openshift.io/cluster-api-machine-type: worker</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="s">        machine.openshift.io/cluster-api-machineset: arofundamentals-pcq8d-worker-eastus1-${LABEL_USER}</span>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="s">    spec:</span>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="s">      lifecycleHooks: {}</span>
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="s">      metadata: {}</span>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="s">      providerSpec:</span>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="s">        value:</span>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a><span class="s">          osDisk:</span>
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="s">            diskSettings: {}</span>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="s">            diskSizeGB: 128</span>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a><span class="s">            managedDisk:</span>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="s">              storageAccountType: Premium_LRS</span>
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a><span class="s">            osType: Linux</span>
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a><span class="s">          networkResourceGroup: dpenagos</span>
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a><span class="s">          publicLoadBalancer: arofundamentals-pcq8d</span>
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a><span class="s">          userDataSecret:</span>
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a><span class="s">            name: worker-user-data</span>
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a><span class="s">          vnet: arofundamentals-aro-vnet-eastus</span>
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a><span class="s">          credentialsSecret:</span>
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a><span class="s">            name: azure-cloud-credentials</span>
<a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a><span class="s">            namespace: openshift-machine-api</span>
<a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a><span class="s">          zone: &#39;1&#39;</span>
<a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a><span class="s">          metadata:</span>
<a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a><span class="s">            creationTimestamp: null</span>
<a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a><span class="s">          publicIP: false</span>
<a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a><span class="s">          resourceGroup: aro-fundamentals-rg</span>
<a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a><span class="s">          kind: AzureMachineProviderSpec</span>
<a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a><span class="s">          location: eastus</span>
<a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a><span class="s">          vmSize: Standard_D4s_v3</span>
<a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a><span class="s">          image:</span>
<a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a><span class="s">            offer: aro4</span>
<a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a><span class="s">            publisher: azureopenshift</span>
<a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a><span class="s">            resourceID: &#39;&#39;</span>
<a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a><span class="s">            sku: aro_411</span>
<a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a><span class="s">            version: 411.86.20221004</span>
<a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a><span class="s">          acceleratedNetworking: true</span>
<a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a><span class="s">          subnet: worker-subnet</span>
<a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a><span class="s">          apiVersion: machine.openshift.io/v1beta1</span>
<a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a><span class="s">EOF</span>
</code></pre></div>
4. Now, let's create the new MachineSet file</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>oc apply -f <span class="si">${</span><span class="nv">NAME_MACHINESET</span><span class="si">}</span>.yaml
</code></pre></div>
</li>
<li>
<p>Now that we've create the new MachineSet, we can see that the machine is already being created. First, let's quickly check the output of the same command we ran in step 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>oc -n openshift-machine-api get machinesets
</code></pre></div>
<p>The output should look something like this:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>NAME                                 DESIRED   CURRENT   READY   AVAILABLE   AGE
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>arofundamentals-pcq8d-worker-eastus1         1         1         1       1           109m
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>arofundamentals-pcq8d-worker-eastus1-user#   1         0         0       0           3m
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>arofundamentals-pcq8d-worker-eastus2         1         1         1       1           109m
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>arofundamentals-pcq8d-worker-eastus3         1         1         1       1           109m
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note, that the number of <em>desired</em> and <em>current</em> nodes matches to one</p>
</div>
<p>We can also run the same command we ran in step 2 to see the machine being provisioned:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>oc -n openshift-machine-api get machine
</code></pre></div>
<p>The output should look something like this:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>NAME                                       PHASE         TYPE              REGION   ZONE   AGE
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>arofundamentals-pcq8d-master-0                     Running       Standard_D8s_v3   eastus   1      81m
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>arofundamentals-pcq8d-master-1                     Running       Standard_D8s_v3   eastus   2      81m
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>arofundamentals-pcq8d-master-2                     Running       Standard_D8s_v3   eastus   3      81m
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>arofundamentals-pcq8d-worker-eastus1-9hjvw         Running       Standard_D4s_v3   eastus   1      76m
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>arofundamentals-pcq8d-worker-eastus1-user#-prrcd   Provisioned   Standard_D4s_v3   eastus   1      3m
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>arofundamentals-pcq8d-worker-eastus2-n8mmf         Running       Standard_D4s_v3   eastus   2      76m
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>arofundamentals-pcq8d-worker-eastus3-679pk         Running       Standard_D4s_v3   eastus   3      76m
</code></pre></div>
</li>
</ol>
<h3 id="via-the-console">Via the Console<a class="headerlink" href="#via-the-console" title="Permanent link">#</a></h3>
<p>Now let's the worker nodes that yuu create, but this time, from the web console.</p>
<ol>
<li>
<p>Return to your tab with the OpenShift Web Console. If you need to reauthenticate, follow the steps in the <a href="../setup/3-access-cluster/">Access Your Cluster</a> section.</p>
</li>
<li>
<p>Using the menu on the left Select <em>Compute</em> -&gt; <em>MachineSets</em>.</p>
<p><img align="center" alt="Web Console - Cluster Settings" src="/assets/images/web-console-machineset-sidebar.png" /></p>
</li>
<li>
<p>In the overview you will see the same information about the MachineSets that you saw on the command line. Now, locate your MachineSet which has "1 of 1" machines.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It may take up to 5 minutes for the MachineSet to create the node 
while the underlying machine provisions and becomes ready.  Until this time, 
the machine count will read "0 of 1".</p>
</div>
</li>
</ol>
<p>Congratulations! You've successfully created your own worker node.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../../../100-setup/3-access-cluster/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Access Your Cluster" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Access Your Cluster
            </div>
          </div>
        </a>
      
      
        
        <a href="../labels/" class="md-footer__link md-footer__link--next" aria-label="Next: Labeling Nodes" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Labeling Nodes
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>